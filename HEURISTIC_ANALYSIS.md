# ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯æ‰‹æ³•ã®åˆ†æ

## ğŸ’¡ ææ¡ˆã•ã‚ŒãŸãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯

### åŸºæœ¬æˆ¦ç•¥: ã€ŒæŸ”è»Ÿæ€§å„ªå…ˆé¸æŠã€

**æ–¹é‡**: 
æ‰‹æœ­ã‹ã‚‰ã€æ®‹ã‚Šã®å±±æœ­ã§**å‡ºã›ã‚‹å¯èƒ½æ€§ãŒæœ€ã‚‚é«˜ã„ã‚«ãƒ¼ãƒ‰**ï¼ˆ=å¤šãã®ã‚«ãƒ¼ãƒ‰ã¨æ¥ç¶šã§ãã‚‹ã‚«ãƒ¼ãƒ‰ï¼‰ã‚’æ®‹ã—ã€
**å‡ºã›ã‚‹å¯èƒ½æ€§ãŒä½ã„ã‚«ãƒ¼ãƒ‰**ã‚’å„ªå…ˆçš„ã«å ´ã«å‡ºã™ã€‚

### å…·ä½“çš„ãªè©•ä¾¡æ–¹æ³•

#### 1. å„æ‰‹æœ­ã‚«ãƒ¼ãƒ‰ã®ã€ŒæŸ”è»Ÿæ€§ã‚¹ã‚³ã‚¢ã€è¨ˆç®—

```python
def calculate_flexibility_score(card: Card, 
                                unknown_cards: List[Card]) -> int:
    """
    ã‚«ãƒ¼ãƒ‰ã®æŸ”è»Ÿæ€§ã‚¹ã‚³ã‚¢ã‚’è¨ˆç®—
    = æœªçŸ¥ã®å±±æœ­ã®ä¸­ã§ã€ã“ã®ã‚«ãƒ¼ãƒ‰ã‹ã‚‰å‡ºã›ã‚‹ã‚«ãƒ¼ãƒ‰ã®æ•°
    """
    compatible_count = 0
    
    for unknown_card in unknown_cards:
        # åŒã˜ã‚¹ãƒ¼ãƒˆã¾ãŸã¯åŒã˜æ•°å€¤ãªã‚‰æ¥ç¶šå¯èƒ½
        if (unknown_card.suit == card.suit or 
            unknown_card.value == card.value):
            compatible_count += 1
    
    return compatible_count
```

#### 2. é¸æŠãƒ­ã‚¸ãƒƒã‚¯

```python
def select_card_to_play(hand: Hand, 
                       field: Field,
                       unknown_cards: List[Card]) -> Tuple[Card, int]:
    """
    ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ã§ã‚«ãƒ¼ãƒ‰ã‚’é¸æŠ
    """
    valid_moves = get_valid_moves(hand, field)
    
    # å„æœ‰åŠ¹æ‰‹ã®æŸ”è»Ÿæ€§ã‚¹ã‚³ã‚¢ã‚’è¨ˆç®—
    scores = []
    for card, slot in valid_moves:
        # ã“ã®ã‚«ãƒ¼ãƒ‰ã‚’å‡ºã—ãŸå¾Œã®æ‰‹æœ­ã®æŸ”è»Ÿæ€§ã‚’è©•ä¾¡
        remaining_hand = hand.copy()
        remaining_hand.remove(card)
        
        # æ®‹ã£ãŸæ‰‹æœ­å…¨ä½“ã®æŸ”è»Ÿæ€§ã‚¹ã‚³ã‚¢
        total_flexibility = sum(
            calculate_flexibility_score(c, unknown_cards) 
            for c in remaining_hand.get_cards()
        )
        
        scores.append((card, slot, total_flexibility))
    
    # æŸ”è»Ÿæ€§ãŒæœ€ã‚‚é«˜ããªã‚‹æ‰‹ã‚’é¸æŠ
    # = æŸ”è»Ÿæ€§ãŒä½ã„ã‚«ãƒ¼ãƒ‰ã‚’å…ˆã«å‡ºã™
    best_move = min(scores, key=lambda x: x[2])
    return best_move[0], best_move[1]
```

## ğŸ“Š ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ vs MCTS ã®æ¯”è¼ƒ

### æ¯”è¼ƒè¡¨

| é …ç›® | ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ | æ±ºå®šè«–çš„MCTS | IS-MCTS |
|------|-----------------|-------------|---------|
| **å®Ÿè£…è¤‡é›‘åº¦** | â­ éå¸¸ã«ç°¡å˜ | â­â­â­ ä¸­ç¨‹åº¦ | â­â­â­â­â­ éå¸¸ã«è¤‡é›‘ |
| **å®Ÿè£…æ™‚é–“** | 1-2æ™‚é–“ | 1-2æ—¥ | 4-7æ—¥ |
| **è¨ˆç®—é€Ÿåº¦** | â­â­â­â­â­ ç¬æ™‚ | â­â­â­ æ•°ç§’ | â­â­ æ•°ç§’ã€œæ•°åç§’ |
| **ç²¾åº¦** | â­â­ å±€æ‰€æœ€é© | â­â­â­â­ è‰¯ã„ | â­â­â­â­â­ æœ€è‰¯ |
| **å…ˆèª­ã¿èƒ½åŠ›** | âŒ ãªã— | âœ… ã‚ã‚Šï¼ˆæ•°æ‰‹å…ˆï¼‰ | âœ… ã‚ã‚Šï¼ˆæ•°æ‰‹å…ˆï¼‰ |
| **ãƒ‡ãƒãƒƒã‚°å®¹æ˜“æ€§** | â­â­â­â­â­ éå¸¸ã«å®¹æ˜“ | â­â­â­ ä¸­ç¨‹åº¦ | â­â­ å›°é›£ |
| **èª¬æ˜å¯èƒ½æ€§** | â­â­â­â­â­ æ˜ç¢º | â­â­ çµ±è¨ˆçš„ | â­â­ çµ±è¨ˆçš„ |

## ğŸ” ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ã®é•·æ‰€

### 1. **å®Ÿè£…ã®ç°¡å˜ã•**

```python
# ãŸã£ãŸ50è¡Œç¨‹åº¦ã§å®Ÿè£…å¯èƒ½
class FlexibilityHeuristic:
    def get_best_move(self, observable_state):
        unknown_cards = self._get_unknown_cards(observable_state)
        valid_moves = self._get_valid_moves(observable_state)
        
        best_move = None
        best_flexibility = -1
        
        for card, slot in valid_moves:
            flexibility = self._evaluate_flexibility(
                card, slot, observable_state, unknown_cards
            )
            if flexibility > best_flexibility:
                best_flexibility = flexibility
                best_move = (card, slot)
        
        return best_move
```

### 2. **è¨ˆç®—é€Ÿåº¦**

- **ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯**: O(N Ã— M) - N=æ‰‹æœ­æšæ•°ã€M=æœªçŸ¥ã‚«ãƒ¼ãƒ‰æ•°
  - å®Ÿæ™‚é–“: < 0.001ç§’
  
- **æ±ºå®šè«–çš„MCTS**: O(S Ã— I Ã— D) - S=ã‚µãƒ³ãƒ—ãƒ«æ•°ã€I=ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã€D=æ·±ã•
  - å®Ÿæ™‚é–“: 1-10ç§’

- **IS-MCTS**: O(I Ã— D) - ãŸã ã—å„ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãŒé‡ã„
  - å®Ÿæ™‚é–“: 5-30ç§’

### 3. **èª¬æ˜å¯èƒ½æ€§**

ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ã®åˆ¤æ–­ç†ç”±ã‚’æ˜ç¢ºã«èª¬æ˜ã§ãã‚‹:

```
ãªãœã“ã®ã‚«ãƒ¼ãƒ‰ã‚’å‡ºã—ãŸã‹ï¼Ÿ
â†’ ã“ã®ã‚«ãƒ¼ãƒ‰ã¯æŸ”è»Ÿæ€§ã‚¹ã‚³ã‚¢ãŒ3ã—ã‹ãªã„
â†’ æ‰‹æœ­ã«æ®‹ã—ã¦ã‚‚æ¬¡ã«å‡ºã›ã‚‹ç¢ºç‡ãŒä½ã„
â†’ ä»Šå‡ºã—ã¦ãŠãã¹ã
```

MCTSã®å ´åˆ:
```
ãªãœã“ã®ã‚«ãƒ¼ãƒ‰ã‚’å‡ºã—ãŸã‹ï¼Ÿ
â†’ 1000å›ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã—ãŸçµæœã€çµ±è¨ˆçš„ã«æœ€è‰¯ã ã£ãŸ
â†’ ï¼ˆå…·ä½“çš„ãªç†ç”±ã¯ä¸æ˜ç­ï¼‰
```

### 4. **ãƒ¡ãƒ¢ãƒªåŠ¹ç‡**

- ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯: ã»ã¼ã‚¼ãƒ­ï¼ˆçŠ¶æ…‹ã‚³ãƒ”ãƒ¼ä¸è¦ï¼‰
- MCTS: æ¢ç´¢æœ¨ã®ãŸã‚å¤§é‡ã®ãƒ¡ãƒ¢ãƒªä½¿ç”¨

## âš ï¸ ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ã®çŸ­æ‰€

### 1. **å…ˆèª­ã¿ã®æ¬ å¦‚**

**ä¾‹**: çŸ­æœŸçš„ã«ã¯è‰¯ã„ãŒã€é•·æœŸçš„ã«ã¯æ‚ªã„æ‰‹

```
çŠ¶æ³:
æ‰‹æœ­: [â™ 3, â™¥5, â™¦7, â™£2, â™ 9]
å ´: ç©º
å±±æœ­æœªçŸ¥: 60æš

ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ã®åˆ¤æ–­:
â†’ â™ 3ã‚’å‡ºã™ï¼ˆæŸ”è»Ÿæ€§ä½ã„ï¼‰

å®Ÿéš›ã®æœ€é©è§£:
â†’ â™¥5ã‚’å‡ºã™
  ç†ç”±: 2æ‰‹å¾Œã«â™ 3ã¨â™ 9ã®é€£é–ãŒæœŸå¾…ã§ãã‚‹
  
ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ã¯ã€Œ2æ‰‹å¾Œã®é€£é–ã€ã‚’äºˆæ¸¬ã§ããªã„
```

### 2. **ãƒã‚¤ãƒ³ãƒˆç²å¾—ã®æœ€é©åŒ–**

ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ã¯ã€ŒæŸ”è»Ÿæ€§ã€ã®ã¿è€ƒæ…®ã—ã€**ç‰¹åˆ¥ãªãƒã‚¤ãƒ³ãƒˆ**ã‚’è€ƒæ…®ã—ã«ãã„:

```
çŠ¶æ³:
æ‰‹æœ­: [â™ 3, â™ 4, â™ 5, â™ 6, â™¥7]

ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯:
â†’ â™¥7ã‚’å‡ºã™ï¼ˆç•°ãªã‚‹ã‚¹ãƒ¼ãƒˆï¼‰

æœ€é©è§£:
â†’ æ‰‹æœ­ã‚’ç¶­æŒã—ã¦ã‚¹ãƒˆãƒ¬ãƒ¼ãƒˆãƒ•ãƒ©ãƒƒã‚·ãƒ¥ï¼ˆ50ptï¼‰ã‚’ç‹™ã†
â†’ å±±æœ­ã‹ã‚‰â™ 2ã‹â™ 7ãŒæ¥ã‚‹å¯èƒ½æ€§ã«è³­ã‘ã‚‹

ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ã¯ã€Œå¾…ã¤ä¾¡å€¤ã€ã‚’è©•ä¾¡ã§ããªã„
```

### 3. **è¤‡é›‘ãªçŠ¶æ³ã§ã®é™ç•Œ**

**ä¾‹**: 2ã¤ã®ã‚¹ãƒ­ãƒƒãƒˆã®ç›¸äº’ä½œç”¨

```
çŠ¶æ³:
ã‚¹ãƒ­ãƒƒãƒˆ1: â™ 5 (ãƒˆãƒƒãƒ—)
ã‚¹ãƒ­ãƒƒãƒˆ2: â™¥7 (ãƒˆãƒƒãƒ—)
æ‰‹æœ­: [â™ 3, â™¥3, â™¦8]

é¸æŠè‚¢:
A) â™ 3ã‚’ã‚¹ãƒ­ãƒƒãƒˆ1ã« â†’ ã‚¹ãƒ­ãƒƒãƒˆ1ãŒâ™ ã«å›ºå®š
B) â™¥3ã‚’ã‚¹ãƒ­ãƒƒãƒˆ2ã« â†’ ã‚¹ãƒ­ãƒƒãƒˆ2ãŒâ™¥ã«å›ºå®š
C) â™¦8ã‚’å‡ºã™ â†’ ä¸¡æ–¹ã«å‡ºã›ãªã„

ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯:
â†’ å˜ç´”ãªæŸ”è»Ÿæ€§ã ã‘ã§ã¯æœ€é©è§£ãŒå‡ºãªã„

MCTS:
â†’ æ•°æ‰‹å…ˆã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã—ã¦æœ€é©è§£ã‚’ç™ºè¦‹
```

### 4. **å±€æ‰€æœ€é©ã«é™¥ã‚‹**

è²ªæ¬²æ³•ã®å…¸å‹çš„å•é¡Œ:

```
å„ã‚¿ãƒ¼ãƒ³ã§æœ€è‰¯ã®æ‰‹ã‚’é¸ã‚“ã§ã‚‚ã€
ã‚²ãƒ¼ãƒ å…¨ä½“ã§ã¯æœ€é©ã«ãªã‚‰ãªã„

ä¾‹: ãƒŠãƒƒãƒ—ã‚µãƒƒã‚¯å•é¡Œã¨åŒæ§˜ã®æ§‹é€ 
```

## ğŸ§ª å®Ÿé¨“: æ€§èƒ½æ¯”è¼ƒäºˆæ¸¬

### ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³çµæœã®äºˆæ¸¬

| æ‰‹æ³• | å¹³å‡ã‚«ãƒ¼ãƒ‰æšæ•° | å¹³å‡ãƒã‚¤ãƒ³ãƒˆ | å®Ÿè¡Œæ™‚é–“ |
|------|--------------|------------|---------|
| **ãƒ©ãƒ³ãƒ€ãƒ ** | 15æš | 2pt | < 0.001ç§’ |
| **ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯** | 22æš | 5pt | < 0.001ç§’ |
| **æ±ºå®šè«–çš„MCTS (10ã‚µãƒ³ãƒ—ãƒ«)** | 28æš | 12pt | 1ç§’ |
| **æ±ºå®šè«–çš„MCTS (100ã‚µãƒ³ãƒ—ãƒ«)** | 30æš | 15pt | 10ç§’ |
| **IS-MCTS (1000ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³)** | 32æš | 18pt | 20ç§’ |

### æ€§èƒ½/ã‚³ã‚¹ãƒˆæ¯”

```
æ€§èƒ½æ”¹å–„ç‡ / è¨ˆç®—æ™‚é–“ = åŠ¹ç‡

ãƒ©ãƒ³ãƒ€ãƒ  â†’ ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯:
  (22-15) / 0.001 = 7000 æ”¹å–„/ç§’ â­â­â­â­â­

ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ â†’ æ±ºå®šè«–çš„MCTS:
  (28-22) / 1 = 6 æ”¹å–„/ç§’ â­â­â­

æ±ºå®šè«–çš„MCTS â†’ IS-MCTS:
  (32-30) / 20 = 0.1 æ”¹å–„/ç§’ â­
```

**çµè«–**: ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ã®**ã‚³ã‚¹ãƒˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒåœ§å€’çš„**

## ğŸ¯ ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã®ææ¡ˆ

### ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ4: ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ + MCTS

#### æˆ¦ç•¥1: ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°

```python
def hybrid_search(observable_state):
    # 1. ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ã§å€™è£œã‚’çµã‚‹
    valid_moves = get_valid_moves(observable_state)
    
    # æŸ”è»Ÿæ€§ã‚¹ã‚³ã‚¢ã§ã‚½ãƒ¼ãƒˆ
    sorted_moves = sort_by_flexibility(valid_moves)
    
    # ä¸Šä½3ã¤ã ã‘MCTSã§è©•ä¾¡
    top_candidates = sorted_moves[:3]
    
    # 2. å€™è£œã«å¯¾ã—ã¦MCTS
    best_move = None
    best_score = -inf
    
    for move in top_candidates:
        score = mcts_evaluate(move, iterations=100)
        if score > best_score:
            best_score = score
            best_move = move
    
    return best_move
```

**ãƒ¡ãƒªãƒƒãƒˆ**:
- æ¢ç´¢ç©ºé–“ã‚’å‰Šæ¸›ï¼ˆé«˜é€ŸåŒ–ï¼‰
- ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ã®çŸ¥è­˜ã‚’æ´»ç”¨
- MCTSã®ç²¾åº¦ã‚’ä¿æŒ

#### æˆ¦ç•¥2: å±€é¢ã«å¿œã˜ãŸåˆ‡ã‚Šæ›¿ãˆ

```python
def adaptive_strategy(observable_state):
    # ã‚²ãƒ¼ãƒ åºç›¤: ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ï¼ˆé€Ÿåº¦é‡è¦–ï¼‰
    if observable_state.turn_count < 10:
        return heuristic_move(observable_state)
    
    # ã‚²ãƒ¼ãƒ ä¸­ç›¤: è»½é‡MCTS
    elif observable_state.turn_count < 30:
        return mcts_move(observable_state, iterations=100)
    
    # ã‚²ãƒ¼ãƒ çµ‚ç›¤: é‡é‡MCTSï¼ˆç²¾åº¦é‡è¦–ï¼‰
    else:
        return mcts_move(observable_state, iterations=1000)
```

#### æˆ¦ç•¥3: ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒªã‚·ãƒ¼ã«

```python
class HeuristicGuidedMCTS:
    def _simulate(self, state):
        """
        ãƒ©ãƒ³ãƒ€ãƒ ã§ã¯ãªãã€ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ã§ãƒ—ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
        """
        while not is_terminal(state):
            valid_moves = get_valid_moves(state)
            
            # ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ã§é¸æŠï¼ˆãƒ©ãƒ³ãƒ€ãƒ ã‚ˆã‚Šè³¢ã„ï¼‰
            move = select_by_heuristic(valid_moves, state)
            state.apply(move)
        
        return evaluate(state)
```

**åŠ¹æœ**: ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®è³ªãŒå‘ä¸Š â†’ å°‘ãªã„ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã§é«˜ç²¾åº¦

## ğŸ“Š æ¨å¥¨å®Ÿè£…é †åºï¼ˆæ”¹è¨‚ç‰ˆï¼‰

### ãƒ¬ãƒ™ãƒ«0: ãƒ©ãƒ³ãƒ€ãƒ ï¼ˆç¾çŠ¶ã®fallbackï¼‰
- å®Ÿè£…æ¸ˆã¿
- ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³

### **ãƒ¬ãƒ™ãƒ«1: ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ï¼ˆNEW!ï¼‰**
- âœ… **å®Ÿè£…æ™‚é–“**: 2-3æ™‚é–“
- âœ… **åŠ¹æœ**: å¤§å¹…æ”¹å–„ï¼ˆäºˆæƒ³: 15æšâ†’22æšï¼‰
- âœ… **ã‚³ã‚¹ãƒˆ**: å®Ÿè³ªã‚¼ãƒ­ï¼ˆç¬æ™‚ï¼‰
- âœ… **èª¬æ˜å¯èƒ½**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«åˆ¤æ–­ç†ç”±ã‚’æç¤ºå¯èƒ½

**å®Ÿè£…å†…å®¹**:
1. `FlexibilityCalculator` ã‚¯ãƒ©ã‚¹
2. `HeuristicStrategy` ã‚¯ãƒ©ã‚¹
3. WebUIã§é¸æŠå¯èƒ½ã«

### ãƒ¬ãƒ™ãƒ«2: ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ï¼ˆãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ + è»½é‡MCTSï¼‰
- å®Ÿè£…æ™‚é–“: 1æ—¥
- å€™è£œçµã‚Šè¾¼ã¿ + MCTSè©•ä¾¡
- ãƒãƒ©ãƒ³ã‚¹å‹

### ãƒ¬ãƒ™ãƒ«3: æ±ºå®šè«–çš„MCTSï¼ˆå®Œå…¨ç‰ˆï¼‰
- å®Ÿè£…æ™‚é–“: 2æ—¥
- ç²¾åº¦é‡è¦–

### ãƒ¬ãƒ™ãƒ«4: IS-MCTSï¼ˆç ”ç©¶ç‰ˆï¼‰
- å®Ÿè£…æ™‚é–“: 5-7æ—¥
- ç†è«–çš„å®Œç’§æ€§

## ğŸ–ï¸ æœ€çµ‚æ¨å¥¨

### **ã¾ãšãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ã‚’å®Ÿè£…ï¼**

**ç†ç”±**:
1. âœ… **å³åŠ¹æ€§**: ä»Šæ—¥ä¸­ã«å®Œæˆ
2. âœ… **å¤§å¹…æ”¹å–„**: ãƒ©ãƒ³ãƒ€ãƒ ã‹ã‚‰åŠ‡çš„ã«å‘ä¸Š
3. âœ… **ãƒªã‚¹ã‚¯ã‚¼ãƒ­**: å®Ÿè£…ç°¡å˜ã€ãƒã‚°ã‚‚å°‘ãªã„
4. âœ… **ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“**: åˆ¤æ–­ç†ç”±ã‚’è¡¨ç¤ºã§ãã‚‹
5. âœ… **åŸºç›¤**: MCTSå®Ÿè£…ã®å‰æ®µéšã¨ã—ã¦æœ‰ç”¨

**å®Ÿè£…å¾Œã®é¸æŠè‚¢**:
- ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ã§æº€è¶³ â†’ å®Œæˆï¼
- ã•ã‚‰ã«ç²¾åº¦ãŒæ¬²ã—ã„ â†’ MCTSè¿½åŠ 
- å­¦è¡“çš„è¿½æ±‚ â†’ IS-MCTSå®Ÿè£…

## ğŸ“ å…·ä½“çš„ãªå®Ÿè£…ææ¡ˆ

### ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
src/controllers/
  â”œâ”€ heuristic_calculator.py    # æŸ”è»Ÿæ€§ã‚¹ã‚³ã‚¢è¨ˆç®—
  â”œâ”€ heuristic_strategy.py      # ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯æˆ¦ç•¥
  â””â”€ strategy_selector.py       # æˆ¦ç•¥åˆ‡ã‚Šæ›¿ãˆ
```

### ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹çµ±ä¸€

```python
# å…¨ã¦ã®æˆ¦ç•¥ãŒåŒã˜ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
class Strategy(ABC):
    @abstractmethod
    def get_best_move(self, observable_state) -> Tuple[Card, int]:
        pass

class HeuristicStrategy(Strategy):
    def get_best_move(self, observable_state):
        # ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯å®Ÿè£…
        pass

class MCTSStrategy(Strategy):
    def get_best_move(self, observable_state):
        # MCTSå®Ÿè£…
        pass

class ISMCTSStrategy(Strategy):
    def get_best_move(self, observable_state):
        # IS-MCTSå®Ÿè£…
        pass
```

### WebUIçµ±åˆ

```python
strategy_type = st.sidebar.selectbox(
    "æˆ¦ç•¥é¸æŠ",
    ["ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ï¼ˆé«˜é€Ÿï¼‰", 
     "MCTSï¼ˆãƒãƒ©ãƒ³ã‚¹ï¼‰", 
     "IS-MCTSï¼ˆç²¾å¯†ï¼‰"]
)

if strategy_type == "ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ï¼ˆé«˜é€Ÿï¼‰":
    strategy = HeuristicStrategy()
elif strategy_type == "MCTSï¼ˆãƒãƒ©ãƒ³ã‚¹ï¼‰":
    strategy = MCTSStrategy(iterations=500)
else:
    strategy = ISMCTSStrategy(iterations=1000)

best_move = strategy.get_best_move(observable_state)

# åˆ¤æ–­ç†ç”±ã‚’è¡¨ç¤º
if hasattr(strategy, 'explain'):
    st.info(strategy.explain(best_move))
```

## ğŸš€ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

**ææ¡ˆ**: ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯æˆ¦ç•¥ã‚’å®Ÿè£…ã—ã¾ã™ã‹ï¼Ÿ

å®Ÿè£…ã™ã‚‹å ´åˆ:
1. `ObservableGameState` ã‚¯ãƒ©ã‚¹ï¼ˆæ—¢å‡ºã‚«ãƒ¼ãƒ‰ç®¡ç†ï¼‰
2. `FlexibilityCalculator` ã‚¯ãƒ©ã‚¹ï¼ˆæŸ”è»Ÿæ€§è¨ˆç®—ï¼‰
3. `HeuristicStrategy` ã‚¯ãƒ©ã‚¹ï¼ˆæˆ¦ç•¥æœ¬ä½“ï¼‰
4. ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰
5. WebUIçµ±åˆ

**æ¨å®šæ™‚é–“**: 2-3æ™‚é–“ã§å®Œæˆã—ã€å³åº§ã«åŠ¹æœã‚’å®Ÿæ„Ÿã§ãã¾ã™ã€‚

å®Ÿè£…ã‚’é€²ã‚ã¾ã™ã‹ï¼Ÿ
